<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>sgs-mvp</title>
  <link rel="stylesheet" href="css/style.css">
</head>

<body class="landing-bg">
  <div id="ui-scale-wrapper">
  <h1>SGS-MVP</h1>

  <!-- 主 UI -->
  <div id="room-ui">
    <button id="create-room-btn" class="sgs-btn">创建房间</button>
    <button id="join-room-btn" class="sgs-btn">加入房间</button>
  </div>

  <div id="game-screen" style="display:none;">
    <div id="player-area"></div>
    <div id="opponent-area"></div>
    <div id="battlefield"></div>
    <div id="hand-cards"></div>
  </div>
  <!-- ⭐ 全螢幕選將畫面 -->
  <div id="choose-general-screen">
      <!-- 身份圖片（身份場才會顯示） -->
      <div>
          <img id="role-image" src="">
      </div>

      <!-- 選將區域 -->
      <h2>请选择武将</h2>
      <div id="general-list"></div>

      <div>
          <button id="confirm-general-btn" class="sgs-btn">
              确认选择
          </button>
      </div>
  </div>
  <!-- 禁止右鍵 -->
  <script>
    document.addEventListener("contextmenu", e => e.preventDefault());
  </script>
  </div>

  <div id="modal-bg" class="modal-bg" style="display:none;"></div>

  <div id="room-settings" class="modal-window" style="display:none;">
    <h2>房间设定</h2>
    <div class="setting-row">
      <span>1. 游戏模式：</span>
      <select id="mode-select">
        <option value="">请选择</option>
        <option value="identity">身份场</option>
        <option value="1v1">1v1</option>
      </select>
    </div>

    <div class="setting-row">
      <span>2. 人数：</span>
      <select id="player-count" disabled></select>
    </div>

    <div class="setting-row" id="role-group-row" style="display:none;">
      <span>身份组合：</span>
      <select id="role-group-select">
          <option value="">请选择</option>
      </select>
    </div>

    <div class="setting-row">
      <span>3. 选将底池：</span>
      <label><input type="checkbox" value="standard" class="pool"> 标将</label>
    </div>

    <div class="setting-row">
      <span>4. 每人可选武将数：</span>
      <select id="general-count">
        <option value="1">1</option>
        <option value="3">3</option>
        <option value="5">5</option>
      </select>
    </div>

    <div class="setting-row">
      <span>5. 出牌时间：</span>
      <select id="play-time">
        <option value="10">10 秒</option>
        <option value="15">15 秒</option>
        <option value="20">20 秒</option>
      </select>
    </div>

    <button id="confirm-create" class="sgs-btn">建立房间</button>
  </div>

  <div id="room-lobby" class="lobby-window" style="display:none;">
    <h2>房间大厅</h2>
    <div class="lobby-info">
      <p><strong>房号：</strong><span id="lobby-room-id"></span></p>
      <p><strong>游戏模式：</strong><span id="lobby-mode"></span></p>
      <p><strong>人数：</strong><span id="lobby-count"></span></p>
      <p><strong>选将底池：</strong><span id="lobby-pool"></span></p>
      <p><strong>每人选将数：</strong><span id="lobby-gcount"></span></p>
      <p><strong>出牌時間：</strong><span id="lobby-playtime"></span></p>
    </div>
    <h3>玩家列表</h3>
    <ul id="player-list"></ul>
    <button id="ready-btn" class="sgs-btn" style="margin-top: 10px;">准备</button>
    <button id="start-game-btn" class="sgs-btn" style="margin-top: 10px; display:none;">开始游戏</button>
    <button id="exit-room-btn" class="sgs-btn" style="margin-top: 10px; background:#c46762; color: white;">退出房间</button>
    <button id="delete-room-btn" class="sgs-btn" style="margin-top:10px; background: #c46762; color: white; display:none;">删除房间</button>
  </div>

  <div id="rotate-tip" style="display:none; width:100vw; height:100vh; align-items:center; justify-content:center; color:white; font-size:28px; background:black;">
    请将手机横向以开始游戏
  </div>

  <div id="name-modal-bg" class="modal-bg" style="display:none;"></div>

  <div id="name-modal" class="modal-window" style="display:none; width:300px;">
    <h3>请输入你的名称</h3>
    <input id="player-name-input" type="text" placeholder="输入名称..." style="width:92%; padding:8px; font-size:18px; margin:10px auto; display:block;">
    <button id="confirm-name-btn" class="sgs-btn" style="width:100%;">确认</button>
  </div>

  <div id="identity-select" class="modal-window" style="display:none;">
    <h3>请选择身份组合</h3>
    <div id="identity-options"></div>
  </div>

  <div id="card-area"></div>
  <div id="general-area"></div>

  <!-- Scripts -->
  <script type="module" src="js/firebase.js"></script>
  <script type="module" src="js/deck.js"></script>
  <script type="module" src="js/heroes.js"></script>
  <script type="module" src="js/render.js"></script>
  <script type="module" src="js/game.js"></script>
</body>
</html>